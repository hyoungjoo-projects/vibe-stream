{
  "master": {
    "tasks": [
      {
        "id": 1,
        "title": "Supabase 프로젝트 및 환경 설정",
        "description": "Supabase MCP를 사용하여 프로젝트 및 환경 설정을 자동화합니다. vibe-stream (jdpbkhqyjltsnkojzids) 프로젝트가 생성되었으며, apply_migration 명령으로 supabase_setup.sql 전체가 성공적으로 실행되었습니다. artists 및 songs 테이블이 생성되어 RLS가 활성화되었고, Storage 버킷(artist-images, song-images, audio-files)이 각각 용량 및 파일 타입 제한과 함께 생성되었습니다. RLS 정책은 모든 사용자가 조회 가능하며, 관리자만 편집할 수 있도록 적용되었습니다. Storage 객체는 모든 파일이 공개 조회 가능하며, 관리자만 업로드/수정/삭제가 가능합니다. 관리자 계정 생성 가이드는 ADMIN_ACCOUNT_SETUP.md에 별도로 작성되어 있습니다. 사용자는 ADMIN_ACCOUNT_SETUP.md를 참고하여 Supabase 대시보드에서 관리자 계정을 생성하면 모든 설정이 완료됩니다.",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "details": "Supabase MCP를 통해 모든 환경 설정이 자동화되었습니다. 주요 설정 내역:\n- vibe-stream 프로젝트 생성 및 확인\n- apply_migration 명령으로 supabase_setup.sql 전체 적용\n- artists, songs 테이블 생성 및 RLS 활성화\n- Storage 버킷 생성: artist-images(5MB, 이미지 전용), song-images(5MB, 이미지 전용), audio-files(20MB, 오디오 전용)\n- RLS 정책: Artists/Songs 테이블은 모든 사용자 조회 가능, 관리자만 편집 가능\n- Storage objects: 모든 파일 공개 조회, 관리자만 업로드/수정/삭제 가능\n- 관리자 계정 생성 가이드: ADMIN_ACCOUNT_SETUP.md 별도 제공\n\n사용자는 ADMIN_ACCOUNT_SETUP.md의 안내에 따라 Supabase 대시보드에서 관리자 계정을 생성하면 모든 설정이 완료됩니다.",
        "testStrategy": "다음 항목을 Supabase 대시보드 및 MCP 서버를 통해 검증합니다:\n- 테이블, 버킷, 정책이 올바르게 생성 및 적용되었는지 확인\n- 관리자 계정 생성 후 권한이 올바르게 적용되는지 테스트 (ADMIN_ACCOUNT_SETUP.md 참고)\n- Storage 버킷의 용량 및 파일 타입 제한이 정상적으로 동작하는지 확인\n- RLS 정책에 따라 조회/편집 권한이 올바르게 적용되는지 테스트\n- MCP 서버의 apply_migration, list_tables, execute_sql 기능을 활용하여 설정 상태를 점검\n- 문제가 발생할 경우 MCP 서버의 get_logs 기능 및 ADMIN_ACCOUNT_SETUP.md의 트러블슈팅 절차를 따라 해결",
        "subtasks": []
      },
      {
        "id": 2,
        "title": "프론트엔드 프로젝트 초기화 및 의존성 설치",
        "description": "Vite + React + TypeScript 프로젝트를 생성하고 필요한 라이브러리를 설치합니다.",
        "details": "npm create vite@latest music-app -- --template react-ts 명령어로 프로젝트를 생성합니다. @supabase/supabase-js, @tanstack/react-query, react-router-dom, react-hook-form, zod, lucide-react, shadcn/ui 관련 컴포넌트를 설치합니다. shadcn/ui init 명령어로 초기 설정을 완료합니다.",
        "testStrategy": "프로젝트가 정상적으로 생성되고, 모든 의존성이 설치되었는지 확인합니다. shadcn/ui 컴포넌트가 정상적으로 import되는지 테스트합니다.",
        "priority": "high",
        "dependencies": [],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 3,
        "title": "Supabase 클라이언트 및 환경 변수 설정",
        "description": "Supabase 클라이언트를 초기화하고 환경 변수를 설정합니다.",
        "details": "src/lib/supabase.ts 파일을 생성하여 createClient로 Supabase 클라이언트를 초기화합니다. .env 파일에 VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY를 설정합니다.",
        "testStrategy": "Supabase 클라이언트가 정상적으로 초기화되고, 환경 변수가 올바르게 로드되는지 확인합니다.",
        "priority": "high",
        "dependencies": [
          1,
          2
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 4,
        "title": "공통 UI 컴포넌트 개발 (Header, PlayerWidget, ArtistCard, SongCard)",
        "description": "모든 페이지에서 사용할 공통 UI 컴포넌트를 개발합니다.",
        "details": "Header, PlayerWidget, ArtistCard, SongCard 컴포넌트를 shadcn/ui와 Tailwind CSS를 사용하여 개발합니다. PlayerWidget은 Context API 또는 Zustand로 전역 상태를 관리합니다.",
        "testStrategy": "각 컴포넌트가 정상적으로 렌더링되고, 필요한 기능이 동작하는지 확인합니다.",
        "priority": "high",
        "dependencies": [
          3
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 5,
        "title": "관리자 로그인 및 인증 가드 구현",
        "description": "관리자 로그인 페이지와 인증 가드를 구현합니다.",
        "details": "관리자 로그인 페이지를 개발하고, Supabase Auth signInWithPassword를 사용하여 로그인을 처리합니다. 인증 가드를 구현하여 비로그인 시 로그인 페이지로 리다이렉트합니다.",
        "testStrategy": "관리자 로그인 및 로그아웃이 정상적으로 동작하고, 인증 가드가 올바르게 동작하는지 확인합니다.",
        "priority": "high",
        "dependencies": [
          4
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 6,
        "title": "아티스트 관리 기능 구현",
        "description": "아티스트 추가, 편집, 목록 조회 기능을 구현합니다. 현재 아티스트 추가/편집 UI는 완성되었으나, Supabase Storage에 이미지를 업로드하는 기능은 아직 구현되지 않았습니다.",
        "status": "done",
        "dependencies": [
          5
        ],
        "priority": "high",
        "details": "아티스트 관리 페이지를 개발하고, React Query를 사용하여 아티스트 목록을 조회합니다. React Hook Form + Zod로 폼 검증을 구현합니다. 아티스트 추가/편집 UI는 완성되었으며, src/pages/admin/Artists.tsx 46번째 줄에 TODO 주석이 있습니다. 현재는 이미지 파일 선택 UI만 있고, 실제 Supabase Storage 업로드 및 URL 저장 기능이 미구현 상태입니다. Supabase Storage에 이미지를 업로드하고, 업로드된 이미지의 URL을 데이터베이스에 저장하는 기능을 추가로 구현해야 합니다.",
        "testStrategy": "아티스트 추가, 편집, 목록 조회가 정상적으로 동작하는지 확인합니다. 특히, 이미지 파일 선택 후 Supabase Storage에 정상적으로 업로드되고, 해당 이미지의 URL이 데이터베이스에 저장되는지 테스트합니다.",
        "subtasks": [
          {
            "id": 1,
            "title": "Supabase Storage 이미지 업로드 기능 구현",
            "description": "아티스트 추가/편집 시 선택한 이미지를 Supabase Storage에 업로드하고, 업로드된 이미지의 URL을 데이터베이스에 저장하는 기능을 구현합니다. src/pages/admin/Artists.tsx 46번째 줄 TODO 주석 부분을 참고하여 구현합니다.",
            "dependencies": [],
            "details": "이미지 파일 선택 후 Supabase Storage의 artist-images 버킷에 업로드합니다. 업로드 성공 시 getPublicUrl로 공개 URL을 받아와 아티스트 데이터와 함께 저장합니다. 오류 발생 시 사용자에게 피드백을 제공합니다.\n<info added on 2025-11-21T11:08:28.905Z>\n아티스트 이미지 업로드 기능 구현 완료:\n\n- src/lib/supabase.ts에서 supabase import 추가\n- imageFile, isUploading 상태 변수 추가\n- handleSubmit 함수에 이미지 업로드 로직 구현: 파일 선택 시 타임스탬프+랜덤 문자열로 고유 파일명 생성, artist-images 버킷에 업로드, getPublicUrl로 공개 URL 받아와 artistData.image_url에 저장\n- 업로드 실패 시 상세 에러 메시지 표시\n- UI 개선: 업로드 중 버튼 비활성화 및 \"업로드 중...\" 텍스트 표시, 테이블에 12x12 썸네일 이미지 미리보기 추가, 이미지 없을 경우 \"No Image\" 플레이스홀더 표시\n\n구현 위치: src/pages/admin/Artists.tsx:11, 23-24, 44-102, 158-218\n</info added on 2025-11-21T11:08:28.905Z>",
            "status": "done",
            "testStrategy": "이미지 파일을 선택하고 저장 시, Supabase Storage에 정상적으로 업로드되고, 해당 이미지의 URL이 아티스트 데이터에 저장되는지 확인합니다. 업로드 실패 시 적절한 오류 메시지가 표시되는지 테스트합니다."
          }
        ]
      },
      {
        "id": 7,
        "title": "곡 관리 기능 구현",
        "description": "곡 추가, 편집, 목록 조회 기능을 구현합니다.",
        "status": "done",
        "dependencies": [
          6
        ],
        "priority": "high",
        "details": "곡 관리 페이지를 개발하고, React Query를 사용하여 곡 목록을 조회합니다. React Hook Form + Zod로 폼 검증을 구현하고, Supabase Storage에 이미지 및 음성 파일 업로드 후 URL을 데이터베이스에 저장합니다. 현재 곡 추가/편집 UI는 완성되었으나, Supabase Storage에 이미지와 음성 파일을 업로드하는 기능이 아직 구현되지 않았습니다. src/pages/admin/Songs.tsx 47-52번째 줄에 TODO 주석이 있습니다. 현재는 파일 선택 UI만 있고, 실제 업로드는 구현되지 않았습니다.",
        "testStrategy": "곡 추가, 편집, 목록 조회가 정상적으로 동작하는지 확인합니다. 특히, 이미지 및 음성 파일 선택 후 Supabase Storage에 정상적으로 업로드되고, 해당 파일의 URL이 데이터베이스에 저장되는지 테스트합니다.",
        "subtasks": [
          {
            "id": 1,
            "title": "Supabase Storage에 이미지 및 음성 파일 업로드 기능 구현",
            "description": "src/pages/admin/Songs.tsx에서 파일 선택 후 Supabase Storage에 이미지 및 음성 파일을 업로드하고, 업로드된 파일의 URL을 데이터베이스에 저장하는 로직을 추가합니다.",
            "dependencies": [],
            "details": "Supabase Storage 클라이언트를 사용하여 이미지 및 음성 파일을 업로드하고, 업로드된 파일의 URL을 곡 데이터와 함께 저장합니다. 파일 업로드 후, 기존 곡 데이터에 이미지 및 음성 파일 URL을 업데이트합니다.\n<info added on 2025-11-21T11:11:51.831Z>\n곡 이미지 및 음성 파일 업로드 기능 구현이 완료되었습니다.\n\n- supabase import 및 클라이언트 초기화 추가\n- imageFile, audioFile, isUploading 상태 변수 도입\n- handleSubmit 함수 내 파일 업로드 로직 구현: 신규 곡 추가 시 오디오 파일 필수 검증, 이미지 파일은 song-images 버킷에 업로드 후 getPublicUrl로 URL 획득, 오디오 파일은 audio-files 버킷에 업로드 후 getPublicUrl로 URL 획득, 받아온 URL들을 songData에 저장\n- 업로드 실패 시 상세 에러 메시지 표시\n- UI 개선: 음성 파일 필수 표시(빨간 별표), 업로드 중 버튼 비활성화 및 \"업로드 중...\" 텍스트 표시, 테이블에 앨범 아트 썸네일(12x12) 및 오디오 플레이어(HTML5 audio controls) 추가, 이미지/오디오 없을 경우 플레이스홀더 표시\n\n구현 위치: src/pages/admin/Songs.tsx:11, 24-26, 45-138, 176-197, 204-266\n</info added on 2025-11-21T11:11:51.831Z>",
            "status": "done",
            "testStrategy": "파일 선택 후 Supabase Storage에 정상적으로 업로드되고, 해당 파일의 URL이 데이터베이스에 저장되는지 확인합니다."
          }
        ]
      },
      {
        "id": 8,
        "title": "곡 재생 및 즐겨찾기 기능 구현",
        "description": "곡 재생 위젯과 즐겨찾기 기능을 구현합니다. 모든 요구사항이 완전히 구현되어 있으며, 추가 작업이 필요하지 않습니다.",
        "status": "done",
        "dependencies": [
          7
        ],
        "priority": "high",
        "details": "아래 모든 기능이 구현 완료되었습니다:\n\n- PlayerContext (src/contexts/PlayerContext.tsx): HTML5 Audio API 기반 곡 재생, 일시정지, 재개, 토글, 진행 바 제어(seekTo), 음량 조절(setVolume), 상태(currentTime, duration, isPlaying) 관리, 이벤트 리스너(timeupdate, loadedmetadata, ended, error) 포함\n- PlayerWidget (src/components/PlayerWidget.tsx): 현재 재생 곡 정보(이미지, 제목, 아티스트) 표시, 재생/일시정지 버튼, 진행 바(클릭 시 seek), 음량 조절 슬라이더, 시간 표시\n- useFavorites (src/hooks/useFavorites.ts): localStorage 기반 즐겨찾기 ID 배열 저장, addToFavorite/removeFromFavorite/isFavorite 메서드, 페이지 로드시 복원\n- SongCard (src/components/SongCard.tsx): 재생/일시정지 버튼(hover 시), 하트 아이콘으로 즐겨찾기 토글, Toast 알림, 즐겨찾기된 곡은 빨간색 채워진 하트 표시\n- Favorite 페이지 (src/pages/Favorite.tsx): useFavorites로 favoriteIds 조회, useSongsByIds로 곡 데이터 조회, SongCard 그리드, 빈 상태 메시지\n- useSongsByIds (src/hooks/useSongs.ts:51-70): ID 배열로 곡 조회, React Query로 캐싱 및 자동 갱신",
        "testStrategy": "아래 항목이 정상적으로 동작하는지 확인 완료:\n- 곡 재생, 일시정지, 진행 바 제어, 음량 조절\n- 즐겨찾기 추가/삭제 및 localStorage 반영\n- SongCard에서 즐겨찾기 토글 및 Toast 알림\n- Favorite 페이지에서 즐겨찾기 곡 목록 및 빈 상태 메시지\n- React Query 기반 곡 데이터 캐싱 및 자동 갱신",
        "subtasks": []
      },
      {
        "id": 9,
        "title": "사용자 피드백 및 Toast 알림 구현",
        "description": "사용자 작업에 대한 피드백을 Toast 알림으로 제공합니다.",
        "details": "shadcn/ui toast 컴포넌트를 사용하여 로그인 실패, 저장 성공, 업데이트 성공, 즐겨찾기 추가/삭제 등 다양한 상황에서 Toast 알림을 표시합니다.",
        "testStrategy": "각 상황에서 Toast 알림이 올바르게 표시되는지 확인합니다.",
        "priority": "medium",
        "dependencies": [
          8
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 10,
        "title": "페이지 및 라우팅 구현",
        "description": "홈페이지, 아티스트 상세, 즐겨찾기, 관리자 대시보드 등 모든 페이지와 라우팅을 구현합니다.",
        "details": "React Router v6를 사용하여 각 페이지의 라우팅을 설정합니다. 각 페이지에서 필요한 데이터를 React Query로 페칭하고, 공통 UI 컴포넌트를 사용합니다.",
        "testStrategy": "모든 페이지가 정상적으로 렌더링되고, 라우팅이 올바르게 동작하는지 확인합니다.",
        "priority": "medium",
        "dependencies": [
          9
        ],
        "status": "done",
        "subtasks": []
      }
    ],
    "metadata": {
      "created": "2025-11-21T06:37:37.677Z",
      "updated": "2025-11-21T11:16:50.247Z",
      "description": "Tasks for master context"
    }
  }
}